import{ab as z,z as P,x as T,A as g,a as C,n as A,b as t,W as r,K as c,a5 as K,G as m,j as h,a6 as M,am as N,B as w,ao as E,ac as Q,F as U,c as Y,l as $,s as x,ap as D,ae as B}from"./index.CXx_r3g5.js";import"./framework.CtQlGyLl.js";import"./theme.lKphzJcC.js";const G=P({__name:"pro-dialog-form",props:{fields:{},dialogProps:{default:()=>({})},cancelText:{default:"取消"},confirmText:{default:"提交"},addRequest:{},editRequest:{},getRequest:{},onSuccess:{},model:{},rules:{},labelPosition:{},requireAsteriskPosition:{},labelWidth:{},labelSuffix:{},inline:{type:Boolean},inlineMessage:{type:Boolean},statusIcon:{type:Boolean},showMessage:{type:Boolean},validateOnRuleChange:{type:Boolean},hideRequiredAsterisk:{type:Boolean},scrollToError:{type:Boolean},scrollIntoViewOptions:{},size:{},disabled:{type:Boolean}},emits:["success","error"],setup(v,{expose:f,emit:d}){const p={closeOnPressEscape:!0,appendToBody:!0,showClose:!0,modal:!0},e=v,l=d,n=T(!1),b={show:()=>{n.value=!0},close:()=>{n.value=!1}},y={id:void 0},{register:V,clearValidate:R,resetFields:k,forceUpdateModel:q,validate:I,formInstance:S}=N(),W=w(()=>({...p,...e.dialogProps})),F=w(()=>E(e,["addRequest","editRequest","getRequest","onSuccess","dialogProps"])),O=async(o,i)=>{var s;b.show(),await B(),k(),R(),q(i||{}),o&&((s=e==null?void 0:e.getRequest)==null||s.call(e,o).then(a=>{q(a)}))};function u(){Z(),b.close()}async function Z(){y.id=void 0,await B(),k(),R()}const _=()=>{I(o=>{var i,s;y.id?(i=e==null?void 0:e.editRequest)==null||i.call(e,y.id,o).then((...a)=>{l("success",...a),u()}).catch(a=>{l("error",a)}):(s=e==null?void 0:e.addRequest)==null||s.call(e,o).then((...a)=>{l("success",...a),u()}).catch(a=>{l("error",a)})})};return f(Q({show:O,close:u,formInstance:S})),(o,i)=>{const s=g("el-button"),a=g("el-dialog");return C(),A(a,h({modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=j=>n.value=j)},W.value),{footer:t(()=>[U(o.$slots,"footer",Y($({submit:_,close:u})),()=>[r(s,{onClick:u},{default:t(()=>[m(x(o.cancelText),1)]),_:1}),r(s,{type:"primary",onClick:_},{default:t(()=>[m(x(o.confirmText),1)]),_:1})])]),default:t(()=>[r(c(D),h(F.value,{onRegister:c(V)}),null,16,["onRegister"])]),_:3},16,["modelValue"])}}}),X=z(G),ee=P({__name:"modal-form",setup(v){const f={dialogProps:{width:"50%",title:"新建表单"},fields:[{label:"签约客户名称",el:"el-input",key:"name",col:{span:12}},{label:"我方公司名称",el:"el-input",key:"selfCompany",col:{span:12}},{label:"合同名称",el:"el-input",key:"ht",col:{span:12}},{label:"合同生效时间",el:"el-date-picker",key:"startTime",attrs:{type:"daterange"},col:{span:12}},{label:"合同约定生效方式",el:"pro-select",key:"way",col:{span:6}},{label:"合同约定失效效方式",el:"pro-select",key:"missWay",col:{span:6}},{label:"项目名称",el:"el-input",key:"projectName"},{label:"商务经理",el:"el-input",key:"bName"}],cancelText:"关闭",confirmText:"确定",labelWidth:100,labelPosition:"top",addRequest:e=>(console.log("data",e),Promise.resolve(e)),getRequest:()=>Promise.resolve({test1:"测试数据"}),editRequest:()=>Promise.resolve(),onSuccess(e){console.log("sucess",e)}},d=T(),p=e=>{var l;(l=d.value)==null||l.show(e,{name:"测试名称"})};return(e,l)=>{const n=g("el-button");return C(),A(c(M),null,{default:t(()=>[r(c(K),{header:e.$route.meta.title},{default:t(()=>[r(n,{onClick:l[0]||(l[0]=()=>p())},{default:t(()=>[m("打开")]),_:1}),r(n,{onClick:l[1]||(l[1]=()=>p(1))},{default:t(()=>[m("编辑")]),_:1}),r(c(X),h({ref_key:"formDialogRef",ref:d},f),null,16)]),_:1},8,["header"])]),_:1})}}});export{ee as default};
