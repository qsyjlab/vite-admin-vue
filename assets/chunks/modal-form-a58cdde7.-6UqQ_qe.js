import{p as W,l as z,n as E,s as F,u as U,O as $}from"./index.mdm6ka2m.js";import{d as B,h as T,D as g,o as C,b as V,w as s,I as i,m as u,a as m,M as v,g as w,al as j,r as K,av as Q,aD as G,t as _,P as x}from"./framework.kGBdJdCt.js";import"../app.4OzQX80d.js";import"./theme.IDZC-AZR.js";const H=B({__name:"pro-dialog-form",props:{fields:{},dialogProps:{default:()=>({})},cancelText:{default:"取消"},confirmText:{default:"提交"},addRequest:{},editRequest:{},getRequest:{},onSuccess:{},model:{},rules:{},labelPosition:{},requireAsteriskPosition:{},labelWidth:{},labelSuffix:{},inline:{type:Boolean},inlineMessage:{type:Boolean},statusIcon:{type:Boolean},showMessage:{type:Boolean},validateOnRuleChange:{type:Boolean},hideRequiredAsterisk:{type:Boolean},scrollToError:{type:Boolean},scrollIntoViewOptions:{},size:{},disabled:{type:Boolean}},emits:["success","error"],setup(h,{expose:f,emit:d}){const p={closeOnPressEscape:!0,appendToBody:!0,showClose:!0,modal:!0},e=h,l=d,n=T(!1),k={show:()=>{n.value=!0},close:()=>{n.value=!1}},y={id:void 0},{register:S,clearValidate:b,resetFields:R,forceUpdateModel:P,validate:I,formInstance:O}=F(),N=w(()=>({...p,...e.dialogProps})),D=w(()=>U(e,["addRequest","editRequest","getRequest","onSuccess","dialogProps"])),M=async(a,r)=>{var t;k.show(),await x(),R(),b(),P(r||{}),a&&((t=e==null?void 0:e.getRequest)==null||t.call(e,a).then(o=>{P(o)}))};function c(){Z(),k.close()}async function Z(){y.id=void 0,await x(),R(),b()}const q=()=>{I(a=>{var r,t;y.id?(r=e==null?void 0:e.editRequest)==null||r.call(e,y.id,a).then((...o)=>{l("success",...o),c()}).catch(o=>{l("error",o)}):(t=e==null?void 0:e.addRequest)==null||t.call(e,a).then((...o)=>{l("success",...o),c()}).catch(o=>{l("error",o)})})};return f(j({show:M,close:c,formInstance:O})),(a,r)=>{const t=g("el-button"),o=g("el-dialog");return C(),V(o,v({modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=A=>n.value=A)},N.value),{footer:s(()=>[K(a.$slots,"footer",Q(G({submit:q,close:c})),()=>[i(t,{onClick:c},{default:s(()=>[m(_(a.cancelText),1)]),_:1}),i(t,{type:"primary",onClick:q},{default:s(()=>[m(_(a.confirmText),1)]),_:1})])]),default:s(()=>[i(u($),v(D.value,{onRegister:u(S)}),null,16,["onRegister"])]),_:3},16,["modelValue"])}}}),J=W(H),le=B({__name:"modal-form",setup(h){const f={dialogProps:{width:"50%",title:"新建表单"},fields:[{label:"签约客户名称",el:"el-input",key:"name",col:{span:12}},{label:"我方公司名称",el:"el-input",key:"selfCompany",col:{span:12}},{label:"合同名称",el:"el-input",key:"ht",col:{span:12}},{label:"合同生效时间",el:"el-date-picker",key:"startTime",attrs:{type:"daterange"},col:{span:12}},{label:"合同约定生效方式",el:"pro-select",key:"way",col:{span:6}},{label:"合同约定失效效方式",el:"pro-select",key:"missWay",col:{span:6}},{label:"项目名称",el:"el-input",key:"projectName"},{label:"商务经理",el:"el-input",key:"bName"}],cancelText:"关闭",confirmText:"确定",labelWidth:100,labelPosition:"top",addRequest:e=>(console.log("data",e),Promise.resolve(e)),getRequest:()=>Promise.resolve({test1:"测试数据"}),editRequest:()=>Promise.resolve(),onSuccess(e){console.log("sucess",e)}},d=T(),p=e=>{var l;(l=d.value)==null||l.show(e,{name:"测试名称"})};return(e,l)=>{const n=g("el-button");return C(),V(u(E),null,{default:s(()=>[i(u(z),{header:e.$route.meta.title},{default:s(()=>[i(n,{onClick:l[0]||(l[0]=()=>p())},{default:s(()=>[m("打开")]),_:1}),i(n,{onClick:l[1]||(l[1]=()=>p(1))},{default:s(()=>[m("编辑")]),_:1}),i(u(J),v({ref_key:"formDialogRef",ref:d},f),null,16)]),_:1},8,["header"])]),_:1})}}});export{le as default};
