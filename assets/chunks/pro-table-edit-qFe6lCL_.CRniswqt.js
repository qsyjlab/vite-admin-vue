import{z as $,a8 as z,x as c,y as A,A as m,a as g,n as b,b as l,W as n,K as a,a5 as G,G as u,a6 as K}from"./index.CXx_r3g5.js";import{E as M}from"./theme.lKphzJcC.js";import"./framework.CtQlGyLl.js";const H=$({__name:"pro-table-edit",setup(S){const{startEditable:f,cancelEditable:k,saveEditable:h,register:v,deleteEditable:E}=z(),r=c(!1);function w(e){console.log("changeHandler",e)}const x=e=>{console.log("delRow",e)},C=e=>{console.log("errors",e),e&&M.error("请填写正确数据")};function _(e,i){console.log("save",e),r.value=!0,setTimeout(()=>{i(),r.value=!1},200)}const T=[{title:"名称",key:"name",tip:"测试tip提示",fixed:"left",editable:!0,rowComponent:{el:"ElInput",rules:[{required:!0,validator:(e,i,t)=>{if(!e)return t(new Error("错误提示有没有"));t()},message:"名称必填"}]}},{title:"地址",key:"address",width:200,editable:!0,rowComponent:{el:"ElInput",rules:[{required:!0,message:"地址"}]}},{title:"邮箱",key:"email",fixed:"left",width:200,editable:!0,rowComponent:{el:"ElInput",rules:[{required:!0,message:"邮箱"}]}},{title:"年份",key:"year",width:200,editable:!0,rowComponent:{el:"ElInput",rules:[{required:!0,message:"年份"}]}},{title:"进度条",key:"progress",width:200,editable:!1,valueType:()=>({type:"progress"})},{title:"函数式返回 enum",key:"fnE",valueType:"enum",width:200,editable:!1,valueEnum:()=>({all:{text:"全部",color:"blue"},open:{text:"未解决",color:"green"},closed:{text:"已解决",color:"red"},processing:{text:"解决中",color:"blue"}})},{title:"状态",key:"status",valueType:"enum",width:200,editable:!1,valueEnum:{all:{text:"全部",color:"blue"},open:{text:"未解决",color:"green"},closed:{text:"已解决",color:"red"},processing:{text:"解决中",color:"blue"}}},{title:"地址1",key:"address1",width:200,editable:!0},{title:"操作",key:"operation",width:300,fixed:"right"}],y=c();A(()=>{setTimeout(()=>{y.value=q()},0)});const I=c({page:1});function q(){let e=Array(100).fill(0),i=0;return e=e.map((t,s)=>({id:++i,name:`name-${s}`,age:18,address:`address-${s}`,status:"all",fnE:"open",progress:80})),e}return(e,i)=>{const t=m("el-button"),s=m("el-space"),R=m("pro-table");return g(),b(a(K),null,{default:l(()=>[n(a(G),{header:e.$route.meta.title},{default:l(()=>[n(R,{"header-title":"pro table",columns:T,data:y.value,params:I.value,"row-key":"id",editable:{mode:"multiple",enableValidate:!0,onSave:_,onDelete(o,d){x(o),d()},onChange:w,onError:C},"auto-fit-height":!1,onRegister:a(v)},{operation:l(({row:o,editableState:d})=>[d&&d.isEdit?(g(),b(s,{key:1},{default:l(()=>[n(t,{loading:r.value,type:"primary",onClick:p=>a(h)(o.id)},{default:l(()=>[u("保存")]),_:2},1032,["loading","onClick"]),n(t,{loading:r.value,onClick:p=>a(k)(o.id)},{default:l(()=>[u("取消")]),_:2},1032,["loading","onClick"]),n(t,{loading:r.value,type:"danger",onClick:p=>a(E)(o.id)},{default:l(()=>[u("删除")]),_:2},1032,["loading","onClick"])]),_:2},1024)):(g(),b(t,{key:0,type:"primary",onClick:p=>a(f)(o.id)},{default:l(()=>[u("编辑")]),_:2},1032,["onClick"]))]),_:1},8,["data","params","editable","onRegister"])]),_:1},8,["header"])]),_:1})}}});export{H as default};
