import{ab as D,u as O,z as R,ac as F,ad as I,x as H,B,ae as K,A as S,a as l,m as f,n as h,W as b,b as k,j as W,r as A,Y as $,S as X,k as _,K as r,v as E,af as J,ag as P,F as Q,ah as T,D as M,q as g,s as Y,ai as j}from"./index.CXx_r3g5.js";function U(d){const i={x:d.clientX,y:d.clientY},u=d.changedTouches;return u&&(i.x=u[0].clientX,i.y=u[0].clientY),(!i.x||i.x<0)&&(i.x=0),(!i.y||i.y<0)&&(i.y=0),i}function V(d,i,u){if(d){const{innerWidth:a,innerHeight:x}=window,{offsetWidth:s,offsetHeight:e}=d;i+s>a&&(i-=i+s-a),u+e>x&&(u-=u+e-x)}return{x:i,y:u}}const Z=Symbol(),G={key:0,class:"icon"},L={class:"ellipsis"},N={key:0,class:"icon"},ee={class:"ellipsis"},ne={key:0,class:"icon"},ie=["onMousedown"],le={class:"ellipsis"},se=R({__name:"menu-item",props:{menu:{}},setup(d){const{onClick:i,itemHeight:u,fontSize:a}=T(Z)||{},x=e=>{var o;return!!((o=e.children)!=null&&o.length)},s=(e,o)=>{var p;o.disabled||((p=o.onClick)==null||p.call(o),i==null||i(e,o))};return(e,o)=>{const p=S("el-menu-item"),w=S("menu-item",!0),C=S("el-sub-menu");return x(e.menu)?(l(),h(C,{key:1,index:e.menu.command},{title:k(()=>{var n,m,v;return[(n=e.menu)!=null&&n.icon?(l(),f("div",N,[b(r(M),{size:r(a),icon:(m=e.menu)==null?void 0:m.icon},null,8,["size","icon"])])):_("v-if",!0),g("span",ee,Y((v=e.menu)==null?void 0:v.title),1)]}),default:k(()=>[(l(!0),f($,null,X(e.menu.children,n=>{var m;return l(),f($,{key:n.command},[(m=n.children)!=null&&m.length?(l(),h(w,{key:1,menu:n},null,8,["menu"])):(l(),h(p,{key:0,style:A({"--el-menu-item-height":`${r(u)}px`}),disabled:e.menu.disabled,index:n.command},{default:k(()=>[n!=null&&n.icon?(l(),f("div",ne,[b(r(M),{size:r(a),icon:n==null?void 0:n.icon},null,8,["size","icon"])])):_("v-if",!0),g("div",{onMousedown:j(v=>s(n.command,n),["stop"])},[g("span",le,Y(n==null?void 0:n.title),1)],40,ie)]),_:2},1032,["style","disabled","index"]))],64)}),128))]),_:1},8,["index"])):(l(),h(p,{key:0,style:A({"--el-menu-item-height":`${r(u)}px`}),disabled:e.menu.disabled,index:e.menu.command},{default:k(()=>{var n,m,v;return[g("div",{class:"menu-item",onMousedown:o[0]||(o[0]=j(t=>s(e.menu.command,e.menu),["stop"]))},[(n=e.menu)!=null&&n.icon?(l(),f("div",G,[b(r(M),{size:r(a),icon:(m=e.menu)==null?void 0:m.icon},null,8,["size","icon"])])):_("v-if",!0),g("span",L,Y((v=e.menu)==null?void 0:v.title),1)],32)]}),_:1},8,["style","disabled","index"]))}}}),te=O(se,[["__scopeId","data-v-9481e936"]]),ue=R({name:"ProContextMenu",inheritAttrs:!1,__name:"context-menu",props:{menus:{default:()=>[]},closeOnClick:{type:Boolean,default:!0},trigger:{default:()=>["contextmenu"]},itemHeight:{default:40},fontSize:{default:14}},emits:["click-menu"],setup(d,{expose:i,emit:u}){const a=d,x=u,s=F({x:0,y:0,visible:!1});I(Z,{onClick:v,itemHeight:a.itemHeight,fontSize:a.fontSize});const e=H(),o=H(),p=H(),w=B(()=>({left:`${s.x}px`,top:`${s.y}px`})),C=B(()=>{const t={};return a.trigger.forEach(y=>{t[y]=c=>{c.preventDefault(),n(c)}}),t});function n(t){s.visible=!0,K(()=>{var y;(y=e.value)==null||y.focus();const c=U(t);if(e.value){const{x:z,y:q}=V(e.value,c.x,c.y);c.x=z,c.y=q}s.x=c.x,s.y=c.y})}const m=()=>{s.visible=!1};function v(t,y){x("click-menu",t,y),y.closeOnClick!==!1&&a.closeOnClick&&(s.visible=!1)}return i({show:n}),(t,y)=>{const c=S("el-menu");return l(),f($,null,[(l(),h(J,{to:"body"},[b(r(E),null,{default:k(()=>[s.visible?(l(),f("div",W({key:0},t.$attrs,{ref_key:"contextMenuRef",ref:e,class:"context-menu",style:w.value,tabindex:-1,onBlur:m}),[b(c,{ref_key:"menuRef",ref:p,collapse:!0,"collapse-transition":!1,router:!1,"close-on-click-outside":!0,teleported:!1,style:A({"--el-menu-item-height":`${t.itemHeight}px`,"--el-menu-item-font-size":`${t.fontSize}px`})},{default:k(()=>[(l(!0),f($,null,X(t.menus,z=>(l(),h(te,{key:z.name,menu:z},null,8,["menu"]))),128))]),_:1},8,["style"])],16)):_("v-if",!0)]),_:1})])),t.$slots.default?(l(),f("span",W({key:0,ref_key:"triggerRef",ref:o,class:"context-menu-trigger"},P(C.value,!0)),[Q(t.$slots,"default",{},void 0,!0)],16)):_("v-if",!0)],64)}}}),oe=O(ue,[["__scopeId","data-v-91168cd9"]]),ce=D(oe);export{ce as u};
