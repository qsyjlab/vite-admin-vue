import{u as Q,o as E,p as W,C as $,A as z,D as F}from"./index.V9EroKAY.js";import{d as C,h as _,D as g,o as B,b as T,w as n,m as p,a as m,I as u,M as v,g as q,al as U,aD as j,av as J,t as w,r as K,P as x}from"./framework.SCZo_iHs.js";import"../app.g2pGqmxW.js";import"./theme.Lm0SghTC.js";const G=C({__name:"pro-dialog-form",props:{fields:{},dialogProps:{default:()=>({})},cancelText:{default:"取消"},confirmText:{default:"提交"},addRequest:{},editRequest:{},getRequest:{},onSuccess:{},model:{},rules:{},labelPosition:{},requireAsteriskPosition:{},labelWidth:{},labelSuffix:{},inline:{type:Boolean},inlineMessage:{type:Boolean},statusIcon:{type:Boolean},showMessage:{type:Boolean},validateOnRuleChange:{type:Boolean},hideRequiredAsterisk:{type:Boolean},scrollToError:{type:Boolean},scrollIntoViewOptions:{},size:{},disabled:{type:Boolean}},emits:["success","error"],setup(h,{expose:f,emit:r}){const e=h,a={closeOnPressEscape:!0,appendToBody:!0,showClose:!0,modal:!0},l=_(!1),d={show:()=>{l.value=!0},close:()=>{l.value=!1}},y={id:void 0},{register:V,clearValidate:b,resetFields:k,forceUpdateModel:R,validate:S,formInstance:D}=$(),I=q(()=>({...a,...e.dialogProps})),A=q(()=>z(e,["addRequest","editRequest","getRequest","onSuccess","dialogProps"])),M=async(t,i)=>{var s;d.show(),await x(),k(),b(),R(i||{}),t&&((s=e==null?void 0:e.getRequest)==null||s.call(e,t).then(o=>{R(o)}))};function c(){N(),d.close()}async function N(){y.id=void 0,await x(),k(),b()}const P=()=>{S(t=>{var i,s;y.id?(i=e==null?void 0:e.editRequest)==null||i.call(e,y.id,t).then((...o)=>{r("success",...o),c()}).catch(o=>{r("error",o)}):(s=e==null?void 0:e.addRequest)==null||s.call(e,t).then((...o)=>{r("success",...o),c()}).catch(o=>{r("error",o)})})};return f(U({show:M,close:c,formInstance:D})),(t,i)=>{const s=g("el-button"),o=g("el-dialog");return B(),T(o,v({modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=O=>l.value=O)},I.value),{footer:n(()=>[K(t.$slots,"footer",J(j({submit:P,close:c})),()=>[u(s,{onClick:c},{default:n(()=>[m(w(t.cancelText),1)]),_:1}),u(s,{type:"primary",onClick:P},{default:n(()=>[m(w(t.confirmText),1)]),_:1})])]),default:n(()=>[u(p(F),v(A.value,{onRegister:p(V)}),null,16,["onRegister"])]),_:3},16,["modelValue"])}}}),H=Q(G),ee=C({__name:"modal-form",setup(h){const f={dialogProps:{width:"50%",title:"新建表单"},fields:[{label:"签约客户名称",el:"el-input",key:"name",col:{span:12}},{label:"我方公司名称",el:"el-input",key:"selfCompany",col:{span:12}},{label:"合同名称",el:"el-input",key:"ht",col:{span:12}},{label:"合同生效时间",el:"el-date-picker",key:"startTime",attrs:{type:"daterange"},col:{span:12}},{label:"合同约定生效方式",el:"pro-select",key:"way",col:{span:6}},{label:"合同约定失效效方式",el:"pro-select",key:"missWay",col:{span:6}},{label:"项目名称",el:"el-input",key:"projectName"},{label:"商务经理",el:"el-input",key:"bName"}],cancelText:"关闭",confirmText:"确定",labelWidth:100,labelPosition:"top",addRequest:a=>(console.log("data",a),Promise.resolve(a)),getRequest:()=>Promise.resolve({test1:"测试数据"}),editRequest:()=>Promise.resolve(),onSuccess(a){console.log("sucess",a)}},r=_(),e=a=>{var l;(l=r.value)==null||l.show(a,{name:"测试名称"})};return(a,l)=>{const d=g("el-button");return B(),T(p(W),null,{default:n(()=>[u(p(E),{header:a.$route.meta.title},{default:n(()=>[u(d,{onClick:l[0]||(l[0]=()=>e())},{default:n(()=>[m("打开")]),_:1}),u(d,{onClick:l[1]||(l[1]=()=>e(1))},{default:n(()=>[m("编辑")]),_:1}),u(p(H),v({ref_key:"formDialogRef",ref:r},f),null,16)]),_:1},8,["header"])]),_:1})}}});export{ee as default};
